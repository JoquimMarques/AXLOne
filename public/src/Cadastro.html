<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../fontawesome-free-6.5.2-web/css/all.min.css">

    <link rel="apple-touch-icon" href="../favicon_io-13/apple-touch-icon.png">
    <link rel="shortcut icon" href="../favicon_io-13/apple-touch-icon.png" type="image/png">
    <title>AXLOne/cadastro</title>

<style>



    /* Reset básico */
    * {
     margin: 0;
     padding: 0;
     box-sizing: border-box;
     font-family: Arial, sans-serif;
   
 }
 
 html, body {
     background-color: black;
     width: 100%;
     height: 100%;
     margin: 0;
     padding: 0;
     position: fixed;
     overflow-x: hidden;
    color: white;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
 }
 
 
 body{
    background-color: black;
}



#notification-banner {
    
    position: fixed;
    top: 220px;
    left: 50%;
    transform: translateX(-50%);
    padding: 20px 30px;
    border-radius: 5px;
    font-size: 16px;
    color: white;
    text-align: center;

    z-index: 1000;
}


.success {
    background-color: #0ebd1c; /* Verde */
    border: 2px solid #91fb99;
    padding: 30px;
}

.error {
    background-color: #ff0000; /* Vermelho */
    border: 2px solid #ff7878;
    padding: 30px;
   
}


.hidden {
    display: none;
}

.login, .luzes-ligada, .luzes-apagada{
    border: none;
    background-color: transparent;
   
   

}
.luzes-apagada i{
    background-color: rgb(0, 0, 0);
    border:none;
    padding:20px 23px;
    border-radius: 100px;
    color:white;
    font-size: 20px;
    
    position: absolute; /* Garante que ele fique fixo */
    right: 10px; /* Alinha na esquerda */
    margin: 0; /* Remove margens */
    top: 10px;

   

} .luzes-ligada i {
    background-color: rgb(255, 255, 255);
    border:none;
    padding: 20px;
    border-radius: 100px;
    color:rgb(0, 0, 0);
    font-size: 20px;

    position: absolute; /* Garante que ele fique fixo */
    right: 10px; /* Alinha na esquerda */
    margin: 0; /* Remove margens */
    top: 10px;



}
.login i {
    background-color: rgb(0, 255, 55);
    border:none;
    padding: 20px 20px;
    border-radius: 100px;
    color:white;
    font-size: 20px;
    position: absolute; /* Garante que ele fique fixo */
    right: 340px; /* Alinha na esquerda */
    margin: 0; /* Remove margens */
    top: 10px;

}


 .logo {
    position: absolute; /* Garante que ele fique fixo */
    left: 770px; /* Alinha na esquerda */
    margin: 0; /* Remove margens */
    top: -63px;
    width: 350px;
  

}







/* Centraliza o formulário na tela */
.container {
   
    box-shadow: 0 0 20px #e0b20e64;
    /* border:1px solid #e0b20e; */
    padding: 240px 30px 20px ;
    border-radius: 10px;
    width: 120%;
    max-width: 400px;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 70%;
    transform: translate(-50%, -50%);
}


.Cadastr{
    width: 650px;
    position: absolute; /* Garante que ele fique fixo */
    left: 70px; /* Alinha na esquerda */
    margin: 0; /* Remove margens */
    top: 30px;
}



.container2{
    
    padding: 20px;
    border-radius: 10px;
    
    width: 120%;
    max-width: 400px;
    text-align: center;

    /* Centralização na tela */
    position: absolute;
    top: 56%;
    left: 50%;
    transform: translate(-50%, -50%);
}





/* Estilização dos inputs com ícones */
.input-container {
    position: relative;
    margin-bottom: 25px;
}

.input-container input {
    width: 100%;
    padding: 10px 30px; /* Espaço para os ícones */
    border: 2px solid #e0b20e;
    background-color: transparent;
    border-radius: 40px;
    font-size: 16px;
    transition: all 0.3s ease;
    color:white;
}

/* Ícones dentro dos inputs */
.input-container i {
    position: absolute;
    left: 10px;
    top: 23%;
    transform: translateY(1px);
    color: #aaa;
    font-size: 18px;
    transition: all 0.7s ease;
}

/* Quando o input está focado, o ícone sobe */
.input-container input:focus + i {
    transform: translateY(-10%);
    color: rgb(0, 0, 0);
}

/* Ícone do olho na senha */
.input-container .eye-icon {
    right: 10px;
    left: auto;
    cursor: pointer;
    transition: transform 0.7s ease;
}

/* Quando a senha está focada, o olho muda */
.input-container input:focus + .eye-icon {
    transform: scale(1.2);
}

/* Botão de login */

.bthE{

width: 70%;
background: #e0b20e;
color: white;
border: none;
padding: 12px;
border-radius: 50px;
font-size: 16px;
cursor: pointer;
margin-left: -3px;
margin-top: 14px;
animation: bri 7s infinite;
border: 2px solid #e0b20e;

}

.bthE:hover{
    background-color: transparent;
    border: 2px solid #e0b20e;
    
}




@keyframes bri {
0% {
  
    transform: scale(1);
}
50% {
    border: 2px solid rgb(255, 255, 255);
    transform: scale(1.1);
    
}
100% {
   
    transform: scale(1);
}
}


/* Links de recuperação e criação de conta */
.links {
    margin-top: 30px;
    display: flex;
    justify-content: center;
    font-size: 14px;
}

.links a {
    color: #ffffff;
    text-decoration: none;
}

.links a:hover {
    text-decoration: underline;
}
.cad{
    text-transform: uppercase;
    font-size:33px;
    margin-bottom: 20px;
    margin-top: -100px;
}








 @media (min-width: 320px) and (max-width:768px){
    
    .hidde{
    display: none;
}

    /* Reset básico */
 * {
     margin: 0;
     padding: 0;
     box-sizing: border-box;
     font-family: Arial, sans-serif;
   
 }
 
 html, body {
     background-color: black;
     width: 100%;
     height: 100%;
     margin: 0;
     padding: 0;
     position: fixed;
     overflow-x: hidden;
    color: white;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
 }
 


#notification-banner {
    
    border-radius: 20px;
    position: fixed;
    top: 230px;
    left: 50%;
    transform: translateX(-50%);
    padding: 20px 30px;
    border-radius: 15px;
    font-weight: bold;
    font-size: 16px;
    
    color: white;
    text-align: center;

    z-index: 1000;
}

.success {
    background-color: #0ebd1c; /* Verde */
    border: 2px solid #91fb99;
    padding: 30px;
}

.error {
    background-color: #ff0000; /* Vermelho */
    border: 2px solid #ff7878;
    padding: 30px;
   
}

.hidden {
    display: none;
}
 
 /* HEADER */
 .header {
   
     color: white;
     padding: 15px 20px;
     margin-bottom: -90px ;
 }
 
 .header_nav h1 {
     font-size: 25px;
     margin-left: -10px;
 }
 
 .header_nav{
     display: flex;
     justify-content: center;
     gap:20px;
     
 }
 
 
 
 
 .login i{
     background: none;
     border: none;
     color: white;
     font-size: 20px;
     background-color: #e0b20e;
     padding: 20px 22px;
     border:none;
     border-radius: 100%;
     font-size: 20px;
    position: absolute; /* Garante que ele fique fixo */
    right: 340px; /* Alinha na esquerda */
    margin: 0; /* Remove margens */
    top: 20px;
     
 
 }
 
 .login, .luzes-ligada, .luzes-apagada{
     border: none;
     background-color: transparent;
     
    
    
 
 }
 .luzes-apagada i{
     background-color: rgb(0, 0, 0);
     border:none;
     padding: 20px 22px;
     border-radius: 100px;
     margin-top: 10px;
     color:white;
     font-size: 22px;
 
 } .luzes-ligada i {
     background-color: rgb(255, 255, 255);
     border:none;
     padding: 20px 21px;
     margin-top: 10px;
     border-radius: 100px;
     color:rgb(0, 0, 0);
     font-size: 22px;
 
 }


 .logo {
    position: absolute; /* Garante que ele fique fixo */
    left: 10px; /* Alinha na esquerda */
    margin: 0; /* Remove margens */
    top: -65px;
    width: 250px;
  

}







/* Centraliza o formulário na tela */
.container {
 
    padding: 20px;
    box-shadow: none;
    border-radius: 10px;
    width: 121%;
    max-width: 400px;
    text-align: center;
    position: absolute;
    top: 66%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* Estilização dos inputs com ícones */
.input-container {
    position: relative;
    margin-bottom: 24px;
}

.input-container input {
    width: 100%;
    padding: 10px 30px; /* Espaço para os ícones */
    border: 2px solid #e0b20e;
    background-color: transparent;
    border-radius: 40px;
    font-size: 16px;
    transition: all 0.3s ease;
    color:white;
}

.confir{
    background-color: red !important;
    margin-top: 20px;
}
/* Ícones dentro dos inputs */
.input-container i {
    position: absolute;
    left: 10px;
    top: 23%;
    transform: translateY(1px);
    color: #aaa;
    font-size: 18px;
    transition: all 0.7s ease;
}

/* Quando o input está focado, o ícone sobe */
.input-container input:focus + i {
    transform: translateY(-10%);
    color: rgb(0, 0, 0);
}

/* Ícone do olho na senha */
.input-container .eye-icon {
    right: 10px;
    left: auto;
    cursor: pointer;
    transition: transform 0.7s ease;
}

/* Quando a senha está focada, o olho muda */
.input-container input:focus + .eye-icon {
    transform: scale(1.2);
}

/* Botão de login */

.bthE{

width: 70%;
background: #e0b20e;
color: white;
border: none;
padding: 12px;
border-radius: 50px;
font-size: 16px;
cursor: pointer;
margin-left: -3px;
margin-top: 14px;
animation: brilho 7s infinite;

}

@keyframes brilho {
    0% {
        box-shadow: 0 0 0 #e0b20e;
        transform: scale(1);
    }
    50% {
        box-shadow: 0 0 5px #e0b20e, 0 0 10px #e0b20e, 0 0 10px #e0b20e;
        transform: scale(1.1);
        
    }
    100% {
        box-shadow: 0 0 2px #e0b20e, 0 0 5px #e0b20e, 0 0 0px #e0b20e;
        transform: scale(1);
    }
}


.cad{
    text-transform: uppercase;
    font-size:33px;
    margin-bottom: 23px;
    margin-top: -120px;
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
}



/* Links de recuperação e criação de conta */
.links {
    margin-top: 30px;
    display: flex;
    justify-content: center;
    font-size: 14px;
}


.links a {
    color: #ffffff;
    text-decoration: none;
}


.links a:hover {
    text-decoration: underline;
}



} 


</style>




</head>
<body>
    <header class="header">
        <nav class="header_nav">
           <img src="../cartoes/logo2.png" alt="logo1" class="logo">
           <img src="../cartoes/Cadastro.png" alt="foto" class="Cadastr hidde">
      
           
            <button class="luzes-ligada" onclick="mudarParaClaro()">
                <i class="fa-solid fa-sun"></i>
            </button>
            
            <button class="luzes-apagada" onclick="mudarParaEscuro()" style="display: none;">
                <i class="fa-solid fa-moon"></i>
            </button>

        </nav>

    </header>

    <form class="container">
        <div id="notification-banner" class="hidden"></div>
    
        <h2 class="cad">Cadastro</h2>
    
        <div class="input-container">
            <input type="text" placeholder="Nome" required>
            <i class="fas fa-user"></i>
        </div>
    
        <div class="input-container">
            <input type="email" placeholder="E-mail" required>
            <i class="fas fa-envelope"></i>
        </div>
    
        <div class="input-container">
            <input type="password" placeholder="Senha" id="password" required>
          
            
            <i class="fas fa-lock"></i>
            <i class="fas fa-eye eye-icon" onclick="togglePassword()"></i>
        </div>
        <div class="input-container">
       
            <input type="password" name="confirmar_senha" placeholder="Confirmar Senha" id="password"   required>
            
            <i class="fas fa-lock"></i>
            
        </div>
    
    
        <button type="submit" class="bthE">Entrar</button>
    
        <div class="links">
         
            <a href="../Login.html">Já tem uma conta ?</a>
        </div>
    </form>


    <script>

document.addEventListener("DOMContentLoaded", function() {
    const Sol = document.querySelector('.luzes-ligada');  
    const Lua = document.querySelector('.luzes-apagada');  
    const Logo = document.querySelector('.logo');  
    const body = document.body; 

    function mudarParaClaro() {
        if (body.style.backgroundColor !== 'white') { // Evita repetição desnecessária
            body.style.backgroundColor = 'white';  
            body.style.color = 'black'; 
            Logo.src = "../cartoes/logo3.png"; // CORRIGIDO: Alterando a imagem corretamente
            Sol.style.display = 'none';  
            Lua.style.display = 'block'; 
        }
    }

    function mudarParaEscuro() {
        if (body.style.backgroundColor !== 'black') { // Evita repetição desnecessária
            body.style.backgroundColor = 'black';  
            body.style.color = 'white'; 
            Logo.src = "../cartoes/logo2.png"; // Retorna a imagem original
            Sol.style.display = 'block'; 
            Lua.style.display = 'none';  
        }
    }

    Sol.addEventListener("click", mudarParaClaro);
    Lua.addEventListener("click", mudarParaEscuro);
});


function togglePassword() {
    const passwordInput = document.getElementById('password');
    const eyeIcon = document.querySelector('.eye-icon');

    // Verifica o tipo atual do campo de senha
    if (passwordInput.type === "password") {
        passwordInput.type = "text"; // Torna a senha visível
        eyeIcon.classList.replace("fa-eye", "fa-eye-slash"); // Muda o ícone para olho fechado
    } else {
        passwordInput.type = "password"; // Oculta a senha com ****
        eyeIcon.classList.replace("fa-eye-slash", "fa-eye"); // Muda o ícone para olho aberto
    }
}


document.addEventListener("DOMContentLoaded", function() {
    const form = document.querySelector('form');
    
    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Impede o envio do formulário padrão

        const nome = document.querySelector('input[type="text"]').value;
        const email = document.querySelector('input[type="email"]').value;
        const senha = document.querySelector('input[type="password"]').value;
        const confirmarSenha = document.querySelector('input[name="confirmar_senha"]').value;

        // Verificar se as senhas coincidem
        if (senha !== confirmarSenha) {
            mostrarMensagem("As senhas não coincidem. Tente novamente.", "error");
            return; // Impede o envio do formulário se as senhas não coincidirem
        }

        // Verificar se o nome ou e-mail já existem
        const dadosVerificacao = { nome, email };

        fetch('http://192.168.1.128:5000/cadastrar' , {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(dadosVerificacao)
        })
        .then(response => response.json())
        .then(data => {
            if (data.exists) {
                if (data.existsEmail) {
                    mostrarMensagem("Este e-mail já está cadastrado. Tente outro.", "error");
                } else if (data.existsNome) {
                    mostrarMensagem("Este nome já está cadastrado. Tente outro.", "error");
                }
            } else {
                // Se o nome e o e-mail não existirem, faz o cadastro
                const novoCadastro = { nome, email, senha };

                fetch('http://192.168.1.128:5000/cadastrar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(novoCadastro)
                })


                .then(response => response.json())
                .then(data => {

           

              
                    if (data.status === 'success') {
                        localStorage.setItem('usuario_id', data.id);
                        mostrarMensagem("Cadastro realizado com sucesso!", "success");
                        setTimeout(() => {
                        window.location.href = '../src/index.html';
                    }, 4000);

                    } else{
                        mostrarMensagem("Este usuário já está Cadastrado. Tente outro", "error");
                       
                    }
            })
                .catch(error => {
                    console.error('Erro ao enviar dados:', error);
                    mostrarMensagem('Erro ao cadastrar usuário.', 'error');
                });
            }
        })
        .catch(error => {
            console.error('Erro na requisição:', error);
            mostrarMensagem('Erro ao verificar dados!', 'error');
        });
    });
});
function mostrarMensagem(msg, tipo) {
    const banner = document.getElementById('notification-banner');
    banner.className = tipo === 'success' ? 'success' : 'error';
    banner.innerText = msg;
    banner.classList.remove('hidden');

    setTimeout(() => {
        banner.classList.add('hidden');
    }, 3000); // 3000ms = 3 segundos
}


    </script>
</body>
</html>